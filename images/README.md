# ğŸ—£ï¸ Ten Turn Detection - WebSocket åè®®è¯´æ˜

Ten Turn Detection æ˜¯ä¸€ä¸ªåŸºäº WebSocket çš„è½®æ¬¡æ£€æµ‹æœåŠ¡ï¼Œç”¨äºåˆ¤æ–­ç”¨æˆ·å‘è¨€æ˜¯å¦å·²ç»“æŸã€‚é€‚ç”¨äºè¯­éŸ³åŠ©æ‰‹ã€å¯¹è¯ç³»ç»Ÿç­‰éœ€è¦æ˜ç¡®è½®æ¬¡è¾¹ç•Œçš„åœºæ™¯ã€‚

---

## ğŸ”Œ WebSocket åœ°å€

---



## ğŸ“¤ å®¢æˆ·ç«¯ â†’ æœåŠ¡ç«¯ æ¶ˆæ¯æ ¼å¼

å®¢æˆ·ç«¯å‘é€ç”¨æˆ·å‘è¨€å†…å®¹ï¼Œè¯·æ±‚åˆ¤æ–­æœ¬è½®å¯¹è¯æ˜¯å¦ç»“æŸã€‚

```json
{
  "type": "message",
  "payload": {
    "user_id": "user-123",
    "timestamp": 1716182400000,
    "text": "è¯·å¸®æˆ‘è®¢ä¸€å¼ æ˜å¤©ä¸‹åˆä¸‰ç‚¹å»ä¸Šæµ·çš„ç¥¨"
  }
}
```

| å­—æ®µå               | ç±»å‹     | è¯´æ˜               |
|-------------------|--------|------------------|
| type              | string | æ¶ˆæ¯ç±»å‹ï¼Œå›ºå®šä¸º message |
| payload.user_id   | string | ç”¨æˆ· id            |
| payload.timestamp | int64  | æ¯«ç±³æ—¶é—´æˆ³            |
| payload.text      | string | ç”¨æˆ·è¯´è¯çš„æ–‡æœ¬å†…å®¹        |



## ğŸ“¤ æœåŠ¡ç«¯ â†’ å®¢æˆ·ç«¯ æ¶ˆæ¯æ ¼å¼

---
```json
{
  "type": "turn_result",
  "payload": {
    "user_id": "user-123",
    "timestamp": 1716182400000,
    "status": "finished"
  }
}
```

| å­—æ®µå               | ç±»å‹     | è¯´æ˜                           |
|-------------------|--------|------------------------------|
| type              | string | æ¶ˆæ¯ç±»å‹ï¼Œå›ºå®šä¸º turn_result         |
| payload.user_id   | string | ç”¨æˆ· id                        |
| payload.timestamp | int64  | æ¯«ç±³æ—¶é—´æˆ³                        |
| payload.status      | string | å‘è¨€æ˜¯å¦ç»“æŸï¼šfinished æˆ– unfinished |


## ğŸ’“å¿ƒè·³
å®¢æˆ·ç«¯æ¯éš” N ç§’å‘é€ä¸€æ¬¡ pingï¼š
```json
{ "type": "ping", "payload": { "timestamp": 1690001234 } }
```
æœåŠ¡ç«¯å›åº”ï¼š
```json
{ "type": "pong", "payload": { "timestamp": 1690001234 } }
```

